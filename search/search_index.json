{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"<code>citable_image</code>","text":"<p>A Python library for working with images canonically citable by Cite2Urn.</p> <ul> <li>See a guide to making IIIF requests</li> <li>See API documentation</li> </ul>"},{"location":"apis/","title":"API documentation","text":""},{"location":"apis/#citable_image.image","title":"<code>citable_image.image</code>","text":""},{"location":"apis/#citable_image.image.CitableImage","title":"<code>CitableImage</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>A class representing a citable image with its associated metadata. Attributes:     urn (Cite2Urn): The URN of the citable image.     caption (str): The caption for the citable image.     rights (str): The rights information for the citable image.</p> Source code in <code>src/citable_image/image.py</code> <pre><code>class CitableImage(BaseModel):\n    \"\"\"\n    A class representing a citable image with its associated metadata.\n    Attributes:\n        urn (Cite2Urn): The URN of the citable image.\n        caption (str): The caption for the citable image.\n        rights (str): The rights information for the citable image.\n    \"\"\"\n    urn: Cite2Urn\n    caption: str\n    rights: str\n\n\n    def delimited(self, delimiter: str = \"|\") -&gt; str:\n        \"\"\"\n        Returns a delimited string representation of the citable image.\n\n        Args:\n            delimiter (str): The delimiter to use between fields. Default is \"|\".\n\n        Returns:\n            str: A delimited string of the citable image's attributes.\n        \"\"\"\n        return f\"{str(self.urn)}{delimiter}{self.caption}{delimiter}{self.rights}\"\n\n\n    def delimited(self, delimiter: str = \"|\") -&gt; str:\n        \"\"\"\n        Composes a delimited string representation of the citable image structure.\n\n        Args:\n            delimiter (str): The delimiter to use between fields. Default is \"|\".\n\n        Returns:\n            str: A delimited string  representation of the citable image's attributes.\n        \"\"\"\n        return f\"{str(self.urn)}{delimiter}{self.caption}{delimiter}{self.rights}\"\n\n    @classmethod\n    def from_delimited(cls, delimited_string: str, delimiter: str = \"|\") -&gt; \"CitableImage\":\n        \"\"\"\n        Creates a CitableImage instance from a delimited string.\n\n        Args:\n            delimited_string (str): A delimited string containing URN, caption, and rights.\n            delimiter (str): The delimiter used between fields. Default is \"|\".\n\n        Returns:\n            CitableImage: A new CitableImage instance.\n        \"\"\"\n        parts = delimited_string.split(delimiter)\n        if len(parts) != 3:\n            raise ValueError(f\"Expected 3 parts separated by '{delimiter}', got {len(parts)}\")\n\n        urn = Cite2Urn.from_string(parts[0])\n        caption = parts[1]\n        rights = parts[2]\n\n        return cls(urn=urn, caption=caption, rights=rights)\n</code></pre>"},{"location":"apis/#citable_image.image.CitableImage.delimited","title":"<code>delimited(delimiter='|')</code>","text":"<p>Composes a delimited string representation of the citable image structure.</p> <p>Parameters:</p> Name Type Description Default <code>delimiter</code> <code>str</code> <p>The delimiter to use between fields. Default is \"|\".</p> <code>'|'</code> <p>Returns:</p> Name Type Description <code>str</code> <code>str</code> <p>A delimited string  representation of the citable image's attributes.</p> Source code in <code>src/citable_image/image.py</code> <pre><code>def delimited(self, delimiter: str = \"|\") -&gt; str:\n    \"\"\"\n    Composes a delimited string representation of the citable image structure.\n\n    Args:\n        delimiter (str): The delimiter to use between fields. Default is \"|\".\n\n    Returns:\n        str: A delimited string  representation of the citable image's attributes.\n    \"\"\"\n    return f\"{str(self.urn)}{delimiter}{self.caption}{delimiter}{self.rights}\"\n</code></pre>"},{"location":"apis/#citable_image.image.CitableImage.from_delimited","title":"<code>from_delimited(delimited_string, delimiter='|')</code>  <code>classmethod</code>","text":"<p>Creates a CitableImage instance from a delimited string.</p> <p>Parameters:</p> Name Type Description Default <code>delimited_string</code> <code>str</code> <p>A delimited string containing URN, caption, and rights.</p> required <code>delimiter</code> <code>str</code> <p>The delimiter used between fields. Default is \"|\".</p> <code>'|'</code> <p>Returns:</p> Name Type Description <code>CitableImage</code> <code>CitableImage</code> <p>A new CitableImage instance.</p> Source code in <code>src/citable_image/image.py</code> <pre><code>@classmethod\ndef from_delimited(cls, delimited_string: str, delimiter: str = \"|\") -&gt; \"CitableImage\":\n    \"\"\"\n    Creates a CitableImage instance from a delimited string.\n\n    Args:\n        delimited_string (str): A delimited string containing URN, caption, and rights.\n        delimiter (str): The delimiter used between fields. Default is \"|\".\n\n    Returns:\n        CitableImage: A new CitableImage instance.\n    \"\"\"\n    parts = delimited_string.split(delimiter)\n    if len(parts) != 3:\n        raise ValueError(f\"Expected 3 parts separated by '{delimiter}', got {len(parts)}\")\n\n    urn = Cite2Urn.from_string(parts[0])\n    caption = parts[1]\n    rights = parts[2]\n\n    return cls(urn=urn, caption=caption, rights=rights)\n</code></pre>"},{"location":"apis/#citable_image.image.pct_string","title":"<code>pct_string(u, places=3)</code>","text":"<p>Generate a IIIF percentage region string from a URN subreference. Args:     u (Cite2Urn): The URN containing the subreference.     places (int): Number of decimal places to round to. Default is 3. Returns:     str: A IIIF percentage region string, or None if no subreference is present.</p> Source code in <code>src/citable_image/image.py</code> <pre><code>def pct_string(u: Cite2Urn, places: int = 3) -&gt; str:    \n    \"\"\"Generate a IIIF percentage region string from a URN subreference.\n    Args:\n        u (Cite2Urn): The URN containing the subreference.\n        places (int): Number of decimal places to round to. Default is 3.\n    Returns:\n        str: A IIIF percentage region string, or None if no subreference is present.\n    \"\"\"\n\n    if u.subreference():\n        roi = u.subreference()\n        # Split the subreference by commas to get individual float values\n        floats = roi.split(\",\")\n        # Multiply each by 100 and round to the specified number of decimal places\n        pct_values = [str(round(float(f) * 100, places)) for f in floats]\n        # Join them back with commas\n        return \"pct:\" + \",\".join(pct_values)\n    else:\n        return None\n</code></pre>"},{"location":"apis/#citable_image.service","title":"<code>citable_image.service</code>","text":""},{"location":"apis/#citable_image.service.IIIFService","title":"<code>IIIFService</code>","text":"<p>               Bases: <code>BaseModel</code></p> <p>A IIIF image service mirroring URN citation in its file layout.</p> <p>Attributes:</p> Name Type Description <code>baseurl</code> <code>str</code> <p>base URL of the IIIF image service.</p> <code>pathroot</code> <code>str</code> <p>root path for the image files.</p> Source code in <code>src/citable_image/service.py</code> <pre><code>class IIIFService(BaseModel):\n    \"\"\"A IIIF image service mirroring URN citation in its file layout.\n\n    Attributes:\n        baseurl (str): base URL of the IIIF image service.\n        pathroot (str): root path for the image files.\n    \"\"\"\n    baseurl: str\n    pathroot: str\n</code></pre>"},{"location":"apis/#citable_image.service.iiif_image","title":"<code>iiif_image(urn, service, w=2000, extension='tif')</code>","text":"<p>Fetch IIIF image from URN citation.</p> <p>Parameters:</p> Name Type Description Default <code>urn</code> <code>Cite2Urn</code> <p>URN citation of the image.</p> required <code>service</code> <code>IIIFService</code> <p>IIIF image service.</p> required <code>w</code> <code>int</code> <p>desired width of the image. Default is 2000.</p> <code>2000</code> <code>extension</code> <code>str</code> <p>image file extension used by the IIIF service. Default is \"tif\".</p> <code>'tif'</code> <p>Returns:</p> Name Type Description <code>Image</code> <p>a PIL Image object</p> Source code in <code>src/citable_image/service.py</code> <pre><code>def iiif_image(urn: Cite2Urn, service: IIIFService, w: int=2000, extension: str = \"tif\"):\n    \"\"\"Fetch IIIF image from URN citation.\n\n    Args:\n        urn (Cite2Urn): URN citation of the image.\n        service (IIIFService): IIIF image service.\n        w (int): desired width of the image. Default is 2000.\n        extension (str): image file extension used by the IIIF service. Default is \"tif\".\n\n    Returns:\n        Image: a PIL Image object\n    \"\"\"\n    url = iiif_url(urn, service, w, extension)\n    img = Image.open(BytesIO(requests.get(url).content))\n    return img\n</code></pre>"},{"location":"apis/#citable_image.service.iiif_url","title":"<code>iiif_url(urn, service, w=2000, extension='tif')</code>","text":"<p>Generate a IIIF image request URL from a URN citation of an image</p> <p>Parameters:</p> Name Type Description Default <code>urn</code> <code>Cite2Urn</code> <p>URN citation of the image.</p> required <code>service</code> <code>IIIFService</code> <p>IIIF image service.</p> required <code>w</code> <code>int</code> <p>desired width of the image. Default is 2000.</p> <code>2000</code> <code>extension</code> <code>str</code> <p>image file extension used by the IIIF service. Default is \"tif\".</p> <code>'tif'</code> <p>Returns:</p> Name Type Description <code>str</code> <p>a URL</p> Source code in <code>src/citable_image/service.py</code> <pre><code>def iiif_url(urn: Cite2Urn, service: IIIFService, w: int=2000, extension: str = \"tif\"):\n    \"\"\"Generate a IIIF image request URL from a URN citation of an image\n\n    Args:\n        urn (Cite2Urn): URN citation of the image.\n        service (IIIFService): IIIF image service.\n        w (int): desired width of the image. Default is 2000.\n        extension (str): image file extension used by the IIIF service. Default is \"tif\".\n\n    Returns:\n        str: a URL\n    \"\"\"\n\n    subdir = urn.namespace + \"/\" + urn.collection + \"/\" + urn.version\n\n    if urn.subreference() is not None:\n        pct = pct_string(urn)\n        return service.baseurl + \"?IIIF=\" + service.pathroot + \"/\" + subdir + \"/\" + urn.drop_subreference().object_id +  f\".{extension}/{pct}/{w},/0/default.jpg\" \n\n    else:\n        return service.baseurl + \"?IIIF=\" + service.pathroot + \"/\" + subdir + \"/\" + urn.drop_subreference().object_id +  f\".{extension}/full/{w},/0/default.jpg\" \n</code></pre>"},{"location":"guide/binary_images/","title":"Retrieving binary image data","text":"<p>You  can use the <code>citable_image</code> library to retrieve binary image data from an IIIF image server that understands site URN citation.</p>"},{"location":"guide/binary_images/#instantiate-a-service","title":"Instantiate a service","text":"<pre><code>import citable_image as ci\nbaseurl = \"http://www.homermultitext.org/iipsrv\"\nroot = \"/project/homer/pyramidal/deepzoom\"\nservice = ci.IIIFService(baseurl=baseurl, pathroot=root)\n</code></pre>"},{"location":"guide/binary_images/#identify-an-image-by-urn","title":"Identify an image by URN","text":"<pre><code>from urn_citation import Cite2Urn\n\nimgurn = Cite2Urn.from_string(\"urn:cite2:citebne:complutensian.v1:v1p19@0.6858,0.06753,0.1013,0.02509\")\n</code></pre>"},{"location":"guide/binary_images/#compose-and-send-iiif-requests","title":"Compose and send IIIF requests.","text":"<p>Compose a IIIF request URL with the <code>iiif_url</code> function:</p> <pre><code>iifrequest = ci.iiif_url(imgurn, service)\n</code></pre> <p>An image from an IIIF service with the <code>iiif_image</code> function:d</p> <pre><code>img = ci.iiif_image(imgurn, service)\n</code></pre>"}]}